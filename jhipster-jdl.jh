entity Attribute {
	name String required
}

entity AttributeItem {
	name String required,
    prefix String required maxlength(3)
}

entity Product {
	name String required
}

entity ProductType {
	name String required,
    prefix String required maxlength(3)
}

entity Sku {
	price BigDecimal required,
    cost BigDecimal,
    code String required,
    barcode String
}

entity Branch {
	name String required,
    prefix String required maxlength(3),
    address String
}

entity Stock {
	amount BigDecimal required
}

entity Transfer {
	refNo String required,
    status TransactionStatus required
}

entity TransferItem {
	amount BigDecimal required
}

entity Transaction {
	refNo String required,
    status TransactionStatus required,
    type TransactionType required,
    reason String maxlength(500)
}

entity TransactionItem {
	amount BigDecimal required
}

entity Bill {
	refNo String required,
    type BillStatus required
}

entity BillItem {
	sellPrice BigDecimal required,
    sellCost BigDecimal required
}

entity Sell {
	refNo String required,
	status SellStatus
}

entity AppConfig {
	key String required,
    value String
}

enum TransactionStatus {
    ASSIGNED, APPROVED, REJECTED
}

enum TransactionType {
    ADD, DELETE, ADJUST, COUNT
}

enum BillStatus {
    SELLING, WAITING, CANCELLED, SOLD, VOIDED
}

enum SellStatus {
    OPENED, CLOSED
}

relationship OneToMany {
	Attribute{attributeItems(name)} to AttributeItem{attribute(name)},
    Transfer{transferItem} to TransferItem{transfer(refNo)},
    Transaction{transactionItem} to TransactionItem{transaction(refNo)},
    Bill{billItem} to BillItem{Bill(refNo)},
    Sell{bill} to Bill{sell(refNo)}
}

relationship OneToOne {
    Stock{sku(code)} to Sku
}

relationship ManyToOne {
	Sku{product(name)} to Product,
    TransferItem{sku(code)} to Sku,
	Product{productType(name)} to ProductType,
    Transfer{srcBranch(name)} to Branch,
    Transfer{destBranch(name)} to Branch,
    Transaction{branch(name)} to Branch,
    TransactionItem{sku(code)} to Sku,
    Stock{branch(name)} to Branch,
    Bill{branch(name)} to Branch,
    BillItem{sku(code)} to Sku,
    Sell{branch(name)} to Branch
}

relationship ManyToMany {
	Product{attribute(name)} to Attribute
}

paginate Product, Sku, Stock, Transfer, Transaction, Bill, Sell with pagination
dto * with mapstruct
service * with serviceImpl